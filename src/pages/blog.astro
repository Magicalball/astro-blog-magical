---
import BaseLayout from "../layouts/BaseLayout.astro";
import VirtualBlogList from "../components/VirtualBlogList.tsx";

const pageTitle = "文章";
const globResult = import.meta.glob("./posts/*.{md,mdx}");
const allPosts = await Promise.all(Object.values(globResult).map(fn => fn()));
const sortedPosts = allPosts.sort(
  (a: any, b: any) => new Date(b.frontmatter.pubDate).getTime() - new Date(a.frontmatter.pubDate).getTime()
);

// 使用虚拟滚动优化性能
---

<BaseLayout pageTitle={pageTitle}>
  <p>都有些什么呀~</p>

  <VirtualBlogList 
    posts={sortedPosts} 
    client:visible 
  />
</BaseLayout>
